<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/xdoc/logging.xml at 13 December 2021
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <meta name="author" content="Clinton Begin" />
    <title>mybatis &#x2013; MyBatis 3 | Logging</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>mybatis</h2>
</div>
</div>
          <div class="pull-right"><a href="../" id="bannerRight" title="MyBatis logo"><img src="../images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 13 December 2021<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 3.5.8</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Reference Documentation</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="getting-started.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="configuration.html" title="Configuration XML"><span class="icon-chevron-right"></span>Configuration XML</a></li>
    <li><a href="sqlmap-xml.html" title="Mapper XML Files"><span class="icon-chevron-right"></span>Mapper XML Files</a></li>
    <li><a href="dynamic-sql.html" title="Dynamic SQL"><span class="none"></span>Dynamic SQL</a></li>
    <li><a href="java-api.html" title="Java API"><span class="icon-chevron-right"></span>Java API</a></li>
    <li><a href="statement-builders.html" title="SQL Builder Class"><span class="none"></span>SQL Builder Class</a></li>
    <li class="active"><a href="#"><span class="none"></span>Logging</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


  
    <section>
<h2><a name="Logging"></a>Logging</h2>
      
<p></p>
      
<p>MyBatis provides logging information through the use of an
        internal log factory. The internal log factory will delegate logging
        information to one of the following log implementations:
      </p>
      
<ul>
        
<li>
          SLF4J
        </li>
        
<li>
          Apache Commons Logging
        </li>
        
<li>
          Log4j 2
        </li>
        
<li>
          Log4j
        </li>
        
<li>
          JDK logging
        </li>
      </ul>
      
<p>The logging solution chosen is based on runtime introspection by
        the internal MyBatis log factory. The MyBatis log factory will use
        the first logging implementation it finds (implementations are
        searched in the above order). If MyBatis finds none of the above
        implementations, then logging will be disabled.
      </p>
      
<p>Many environments ship Commons Logging as a part of the application server
        classpath (good examples include Tomcat and WebSphere). It is
        important to know that in such environments, MyBatis will use Commons Logging as
        the logging implementation. In an environment like WebSphere this
        will mean that your Log4J configuration will be ignored because
        WebSphere supplies its own proprietary implementation of Commons Logging. This
        can be very frustrating because it will appear that MyBatis is
        ignoring your Log4J configuration (in fact, MyBatis is ignoring your
        Log4J configuration because MyBatis will use Commons Logging in such
        environments). If your application is running in an environment
        where Commons Logging is included in the classpath but you would
        rather use one of the other logging implementations you can select a
        different logging implementation by adding a setting in mybatis-config.xml file as follows:
      </p>
      
<div class="source"><pre class="prettyprint">&lt;configuration&gt;
  &lt;settings&gt;
    ...
    &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;
    ...
  &lt;/settings&gt;
&lt;/configuration&gt;
      </pre></div>
      
<p>Valid values are SLF4J, LOG4J, LOG4J2, JDK_LOGGING, COMMONS_LOGGING, STDOUT_LOGGING, NO_LOGGING or
      a full qualified class name that implements <code>org.apache.ibatis.logging.Log</code> and gets
      an string as a constructor parameter.
      </p>
      
<p>You can also select the implementation by calling one of the following methods:
      </p>
      
<div class="source"><pre class="prettyprint">org.apache.ibatis.logging.LogFactory.useSlf4jLogging();
org.apache.ibatis.logging.LogFactory.useLog4JLogging();
org.apache.ibatis.logging.LogFactory.useLog4J2Logging();
org.apache.ibatis.logging.LogFactory.useJdkLogging();
org.apache.ibatis.logging.LogFactory.useCommonsLogging();
org.apache.ibatis.logging.LogFactory.useStdOutLogging();</pre></div>
      
<p>If you choose to call one of these methods, you should do so
        before calling any other MyBatis method. Also, these methods
        will only switch to the requested log implementation if that
        implementation is available on the runtime classpath. For example, if
        you try to select Log4J logging and Log4J is not available at runtime,
        then MyBatis will ignore the request to use Log4J and will use it's
        normal algorithm for discovering logging implementations.
      </p>
      
<p>The specifics of SLF4J, Apache Commons Logging, Apache Log4J and the JDK
        Logging API are beyond the scope of this document. However the
        example configuration below should get you started. If you would like
        to know more about these frameworks, you can get more information from
        the following locations:
      </p>
      
<ul>
        
<li>
          <a class="externalLink" href="http://www.slf4j.org/">SLF4J</a>
        </li>
        
<li>
          <a class="externalLink" href="http://commons.apache.org/logging">Apache Commons Logging</a>
        </li>
        
<li>
          <a class="externalLink" href="http://logging.apache.org/log4j/">Apache Log4j 1.x and 2.x</a>
        </li>
        
<li>
          <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html">JDK Logging API</a>
        </li>
      </ul>
      <section>
<h3><a name="Logging_Configuration"></a>Logging Configuration</h3>
        
<p>To see MyBatis logging statements you may enable logging on a
          package, a mapper fully qualified class name, a namespace
          o a fully qualified statement name.
        </p>
        
<p>Again, how you do this is dependent on the logging implementation
          in use. We'll show how to do it with Log4J. Configuring the
          logging services is simply a matter of including one or more extra
          configuration files (e.g. log4j.properties) and sometimes a new JAR
          file (e.g. log4j.jar). The following example configuration will
          configure full logging services using Log4J as a provider. There
          are 2 steps.
        </p>
        
<p></p>
        <section>
<h4><a name="Step_1:_Add_the_Log4J_JAR_file"></a>
          Step 1: Add the Log4J JAR file
        </h4>
        
<p>Because we are using Log4J, we will need to ensure its
          JAR file is available to our application. To use Log4J, you need to
          add the JAR file to your application classpath. You can download
          Log4J from the URL above.
        </p>
        
<p>For web or enterprise applications you can add the <code>log4j.jar</code> to
          your <code>WEB-INF/lib</code> directory, or for a standalone application you can
          simply add it to the JVM <code>-classpath</code> startup parameter.
        </p>
        
<p></p>
        </section><section>
<h4><a name="Step_2:_Configure_Log4J"></a>
          Step 2: Configure Log4J
        </h4>
        
<p>Configuring Log4J is simple. Suppose you want to enable the log for this mapper:
        </p>
        
<div class="source"><pre class="prettyprint">package org.mybatis.example;
public interface BlogMapper {
  @Select(&quot;SELECT * FROM blog WHERE id = #{id}&quot;)
  Blog selectBlog(int id);
}</pre></div>
        
<p>Create a file called <code>log4j.properties</code>
        as shown below and place it in your classpath:
        </p>
        
<div class="source"><pre class="prettyprint"># Global logging configuration
log4j.rootLogger=ERROR, stdout
# MyBatis logging configuration...
log4j.logger.org.mybatis.example.BlogMapper=TRACE
# Console output...
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</pre></div>
        
<p>
          The above file will cause log4J to report detailed logging for
          <code>org.mybatis.example.BlogMapper</code>
          and just errors for the rest of the classes of your application.
        </p>
        
<p>
          If you want to tune the logging at a finer level you can turn logging
          on for specific statements instead of the whole mapper file.
          The following line will enable logging just for the <code>selectBlog</code>
          statement:
        </p>

        
<div class="source"><pre class="prettyprint">log4j.logger.org.mybatis.example.BlogMapper.selectBlog=TRACE</pre></div>

        
<p>By the contrary you may want want to enable logging for a group of mappers.
        In that case you should add as a logger the root package where your mappers reside:</p>

        
<div class="source"><pre class="prettyprint">log4j.logger.org.mybatis.example=TRACE</pre></div>

        
<p>There are queries that can return huge result sets. In that cases you may want to see the
        SQL statement but not the results. For that purpose SQL statements are logged at the DEBUG level
        (FINE in JDK logging) and results at the TRACE level (FINER in JDK logging), so in case
        you want to see the statement but not the result, set the level to DEBUG.
        </p>

        
<div class="source"><pre class="prettyprint">log4j.logger.org.mybatis.example=DEBUG</pre></div>

        
<p>But what about if you are not using mapper interfaces but mapper XML files like this one?
        </p>

      
<div class="source"><pre class="prettyprint">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
  PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
  &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;org.mybatis.example.BlogMapper&quot;&gt;
  &lt;select id=&quot;selectBlog&quot; resultType=&quot;Blog&quot;&gt;
    select * from Blog where id = #{id}
  &lt;/select&gt;
&lt;/mapper&gt;</pre></div>

        
<p>In that case you can enable logging for the whole XML file by adding a logger for the namespace as shown below:</p>

        
<div class="source"><pre class="prettyprint">log4j.logger.org.mybatis.example.BlogMapper=TRACE</pre></div>

        
<p>Or for an specific statement:</p>

        
<div class="source"><pre class="prettyprint">log4j.logger.org.mybatis.example.BlogMapper.selectBlog=TRACE</pre></div>

        
<p>Yes, as you may have noticed, there is no difference in configuring logging for mapper interfaces or for XML mapper files.</p>

        
<p><span class="label important">NOTE</span> If you are using SLF4J or Log4j 2 MyBatis will call it using the marker MYBATIS.</p>

        
<p>The remaining configuration in the <code>log4j.properties</code> file is used
          to configure the appenders, which is beyond the scope of this
          document. However, you can find more information at the Log4J
          website (URL above). Or, you could simply experiment with it to see
          what effects the different configuration options have.
        </p>

      </section></section>
    </section>
  

        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2009&#x2013;2021<a href="https://www.mybatis.org/">MyBatis.org</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
